<?xml version="1.0" encoding="UTF-8"?>
<flow xmlns="http://www.springframework.org/schema/webflow"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.springframework.org/schema/webflow 
  http://www.springframework.org/schema/webflow/spring-webflow-2.0.xsd">

    <!-- <var name="userInfo" class="com.serlvet.db.mongo.collection.UserInfo"/> -->

    <view-state id="order1" view="order/order1">
        <transition on="seachUserInfo" to="seachUserInfo" />
    </view-state>

    <action-state id="seachUserInfo">
        <!-- <evaluate result="userInfo" expression="userAgent.getUserInfo(requestParameters.username)" 
            /> -->
        <evaluate result="flowScope.userInfo1"
            result-type="com.serlvet.db.mongo.collection.UserInfo"
            expression="userAgent.seachUserInfo(requestParameters.username)" />
        <transition to="order2" />
    </action-state>

    <view-state id="order2" view="order/order2">
        <transition on="end" to="getUserInfo" />
    </view-state>

    <action-state id="getUserInfo">
        <evaluate result="requestScope.userInfo"
            result-type="com.serlvet.db.mongo.collection.UserInfo"
            expression="userAgent.getUserInfo()" />
        <transition to="end" />
    </action-state>

    <!-- End state -->
    <end-state id="end" view="order/end" />
</flow>
